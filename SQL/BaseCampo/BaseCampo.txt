CREATE TABLE BASE_CAMPO (
    ID INTEGER NOT NULL,
    ID_OPERACAO INTEGER NOT NULL,
    ID_USUARIO INTEGER NOT NULL,
	ID_PROPRIEDADE INTEGER NOT NULL,
    DATA_CRIACAO DATE NOT NULL,
    DATA_REG TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    STATUS INTEGER DEFAULT 1 NOT NULL ,
    DATA_SYNC DATE,
    HORA_SYNC TIME);

ALTER TABLE BASE_CAMPO
ADD CONSTRAINT PK_BASE_CAMPO
PRIMARY KEY (ID);

COMMENT ON COLUMN BASE_CAMPO.ID_OPERACAO IS
'1=Movimentacao Pesagem
2=Entrada Novos Animais
3=Entrada Animais Rastreados
4=Saida Embarque';

COMMENT ON COLUMN BASE_CAMPO.STATUS IS
'-1 Excluida
1 Ativa
2 Finalizada';

CREATE SEQUENCE GEN_BASE_CAMPO_ID;

SET TERM ^ ;

create trigger base_campo_bi for base_campo
active before insert position 0
as
begin
  if (new.id is null) then
    new.id = gen_id(gen_base_campo_id,1);
end^

SET TERM ; ^

CREATE TABLE DET_BASE_CAMPO_GTA (
    ID INTEGER NOT NULL,
    ID_BASE_CAMPO INTEGER NOT NULL,
    ID_GTA INTEGER NOT NULL,
    STATUS INTEGER DEFAULT 1 NOT NULL);

ALTER TABLE DET_BASE_CAMPO_GTA
ADD CONSTRAINT PK_DET_BASE_CAMPO_GTA
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_DET_BASE_CAMPO_GTA_ID;

SET TERM ^ ;

create trigger det_base_campo_gta_bi for det_base_campo_gta
active before insert position 0
as
begin
  if (new.id is null) then
    new.id = gen_id(gen_det_base_campo_gta_id,1);
end^

SET TERM ; ^

CREATE TABLE DET_BASE_CAMPO_BRINCOS (
    ID INTEGER NOT NULL,
    ID_BASE_CAMPO INTEGER NOT NULL,
    SISBOV_INICIAL VARCHAR(20) NOT NULL,
    SISBOV_FINAL VARCHAR(20) NOT NULL,
    STATUS INTEGER DEFAULT 1 NOT NULL);

ALTER TABLE DET_BASE_CAMPO_BRINCOS
ADD CONSTRAINT PK_DET_BASE_CAMPO_BRINCOS
PRIMARY KEY (ID);

CREATE SEQUENCE GEN_DET_BASE_CAMPO_BRINCOS_ID;

SET TERM ^ ;

create trigger det_base_campo_brincos_bi for det_base_campo_brincos
active before insert position 0
as
begin
  if (new.id is null) then
    new.id = gen_id(gen_det_base_campo_brincos_id,1);
end^

SET TERM ; ^

ALTER TABLE DET_BASE_CAMPO_BRINCOS
ADD CONSTRAINT FK_DET_BASE_CAMPO_BRINCOS_1
FOREIGN KEY (ID_BASE_CAMPO)
REFERENCES BASE_CAMPO(ID)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE DET_BASE_CAMPO_GTA
ADD CONSTRAINT FK_DET_BASE_CAMPO_GTA_1
FOREIGN KEY (ID_BASE_CAMPO)
REFERENCES BASE_CAMPO(ID)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE ANIMAL
ADD ID_BASE_CAMPO INTEGER;

ALTER TABLE ANIMAL_SANIDADE
ADD ID_BASE_CAMPO INTEGER;

ALTER TABLE ANIMAL_PESO
ADD ID_BASE_CAMPO INTEGER;

ALTER TABLE MOVIMENTACAO_ANIMAL
ADD ID_BASE_CAMPO INTEGER;

ALTER TABLE ESTOQUE_BRINCOS
ADD ID_BASE_CAMPO INTEGER;

ALTER TABLE GTA
ADD ID_BASE_CAMPO INTEGER;

ALTER TABLE ANIMAL
ADD BASE_CAMPO_SYNC INTEGER DEFAULT 0;

ALTER TABLE ANIMAL_SANIDADE
ADD BASE_CAMPO_SYNC INTEGER DEFAULT 0;

ALTER TABLE ANIMAL_PESO
ADD BASE_CAMPO_SYNC INTEGER DEFAULT 0;

ALTER TABLE MOVIMENTACAO_ANIMAL
ADD BASE_CAMPO_SYNC INTEGER DEFAULT 0;

ALTER TABLE ESTOQUE_BRINCOS
ADD BASE_CAMPO_SYNC INTEGER DEFAULT 0;

ALTER TABLE GTA
ADD BASE_CAMPO_SYNC INTEGER DEFAULT 0;

ALTER TABLE ANIMAL
ADD BASE_CAMPO_DT_SYNC DATE;

ALTER TABLE ANIMAL_SANIDADE
ADD BASE_CAMPO_DT_SYNC DATE;

ALTER TABLE ANIMAL_PESO
ADD BASE_CAMPO_DT_SYNC DATE;

ALTER TABLE MOVIMENTACAO_ANIMAL
ADD BASE_CAMPO_DT_SYNC DATE;

ALTER TABLE ESTOQUE_BRINCOS
ADD BASE_CAMPO_DT_SYNC DATE;

ALTER TABLE GTA
ADD BASE_CAMPO_DT_SYNC DATE;



